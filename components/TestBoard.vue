<template><var-drag:style="{left: init.left + 'px',top: init.top + 'px',}"teleport=".onlineGallery-child-window-container"><div class="test-container" ref="containerRef"><div class="test-body"><h3>测试窗口</h3><div>当前使用内存使用情况:</div><divv-if="isSupported && memory"class="inline-grid grid-cols-2 gap-x-4 gap-y-2"><template v-if="memory"><div opacity="50">使用中:</div><div>{{ size(memory.usedJSHeapSize) }}</div><div opacity="50">已分配:</div><div>{{ size(memory.totalJSHeapSize) }}</div><div opacity="50">最大可用:</div><div>{{ size(memory.jsHeapSizeLimit) }}</div></template></div></div><div class="test-footer"><var-button type="primary" @click="handleClose"> 确认 </var-button><var-button @click="handleClose">取 消</var-button></div></div></var-drag></template><script setup lang="ts">const emits = defineEmits(["toClose"]);const appInfo = useAppInfoStore();const containerRef = ref<HTMLElement | null>();const {isSupported, memory} = useMemory();function size(v: number) {const kb = v / 1024 / 1024;return `${kb.toFixed(2)} MB`;}const init = reactive({left: 0,top: 0,});onMounted(() => {const {width: w_width, height: w_height} = appInfo.window;const {width: c_width, height: c_height} =containerRef.value!.getBoundingClientRect();const left = (w_width - c_width) / 2;const top = (w_height - c_height) / 2;console.log(left, top);init.left = left;init.top = top;});function handleClose() {emits("toClose");}</script><style lang="scss" scoped>.test-container {width: 50vw;height: 50vh;padding: 20px;background-color: rgba(245, 222, 179, 0.9);border-radius: 4px;display: flex;flex-flow: column nowrap;box-shadow: var(--el-box-shadow-dark);}.test-body {position: relative;flex-grow: 1;width: 100%;h3 {margin: 0;padding: 0;}.listContainer {& {width: 100%;height: 100%;}.listWrapper {width: 100%;display: flex;flex-flow: row;justify-content: center;align-items: center;}}}.test-footer {width: 100%;height: fit-content;display: flex;flex-flow: row nowrap;justify-content: end;}</style>