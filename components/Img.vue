<template><img :parentSelector="parentSelector" :src="src" /></template><script lang="ts" setup>defineProps({src: String,parentSelector: {type: String,default: "null",},margin: {type: String,default: "0%",},});const vLazy = {mounted(el, binding, vNode) {el.dataset.show = false; let url = binding.value; let observer = new IntersectionObserver((entries, observer) => {entries.forEach((entire) => {if (entire.isIntersecting) {observer.unobserve(el); el.src = url; if (el.tagName == "IMG") {if (el.complete) {el.dataset.show = true;} else {el.addEventListener("load", fn);el.addEventListener("error", fn);function fn() {el.dataset.show = true;el.removeEventListener("load", fn);el.removeEventListener("error", fn);}}} else {el.dataset.show = true;}}});},{root: document.querySelector(vNode.props.parentSelector),rootMargin: vNode.props.margin,}); observer.observe(el);},};</script><style lang="scss" scoped>* {margin: 0 !important;padding: 0 !important;border: 0 !important;box-sizing: border-box !important;z-index: 0 !important;}[data-show="true"] {opacity: 1;filter: blur(0px);transition: .2s;}[data-show="false"] {opacity: 0;filter: blur(10px);transition: .2s;}</style>