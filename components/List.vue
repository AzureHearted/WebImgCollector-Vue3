<template><div ref="listContainer"><el-scrollbar ref="scrollbarRef" @scroll="handleScroll"><transition-groupid="onlineGallery-listBody"class="onlineGallery-listBody"ref="listBody":style="getStyle"name="list"tag="div"><Cardv-for="(card, index) in cardsStore.filterCards":card="card":key="card.id":index="index":data-index="index":style="{'--aspect-ratio': card.meta.aspectRatio,}"></Card></transition-group><transition name="backTop"><divv-show="backTopShow"ref="backTop"class="onlineGallery-backTop"@click="backToTop"><el-icon><i-ep-CaretTop /></el-icon></div></transition></el-scrollbar></div></template><script setup lang="ts">const listContainer = ref(); const listBody = ref(); const scrollbarRef = ref();const wrapRef = ref();const cardsStore = useCardsStore();const toolBar = useToolBarStore();const listControl = toolBar.listControl;const getStyle = computed(() => {if (listContainer.value == null) {return;}const containerInfo = listContainer.value.getBoundingClientRect();let style = {"--nowColumn": listControl.showColumn,"--listHeight":containerInfo.height - 8 * listControl.showColumn - 10 + "px","--cardMaxHeight": `calc(var(--listHeight) / var(--nowColumn))`,};if (listControl.showColumn <= 0) {style["--cardMaxHeight"] = "1000%";}return style;});const backTop = ref(); const backTopShow = ref(false);interface scrollEvent {scrollLeft: number;scrollTop: number;}const handleScroll = (scrollEvent: scrollEvent) => {if (scrollEvent.scrollTop > 150) {backTopShow.value = true;} else {backTopShow.value = false;}};const backToTop = () => {scrollbarRef.value.setScrollTop(0);};</script><style lang="scss" scoped>* {border: 0;margin: 0;box-sizing: border-box;}.onlineGallery-listBody {width: 100%;padding: 10px;display: flex;flex-flow: row wrap;justify-content: center;align-items: stretch;align-content: start;gap: 8px;transition: 1s;user-select: none;-webkit-user-drag: none;}.onlineGallery-backTop {--el-backtop-bg-color: var(--el-bg-color-overlay);--el-backtop-text-color: var(--el-color-primary);--el-backtop-hover-bg-color: var(--el-border-color-extra-light);position: absolute;width: 40px;height: 40px;right: 40px;bottom: 40px;border-radius: 50%;background-color: var(--el-bg-color-overlay);color: var(--el-color-primary);display: flex;align-items: center;justify-content: center;font-size: 20px;box-shadow: var(--el-box-shadow-lighter);cursor: pointer;z-index: 5;transition: 0.5s;&:hover {background-color: var(--el-border-color-extra-light);}}.backTop-enter-active,.backTop-leave-active {transition: opacity 0.5s ease;}.backTop-enter-from,.backTop-leave-to {opacity: 0;}.list-move,.list-enter-active,.list-leave-active {transition: all 0.5s ease;}.list-enter-from,.list-leave-to {opacity: 0;transform: translateX(30px);}.list-leave-active {position: absolute;}</style>