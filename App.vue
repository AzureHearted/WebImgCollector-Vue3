<template><divclass="onlineGallery-container"ref="container":data-open="info.open":style="{'--width': info.window.width * info.widthPercentage * 0.01 + 'px',}"@focus="focus"@blur="blur"><Body ref="body"></Body><el-buttonclass="onlineGallery-button-close"type="danger":icon="Close"circle@click="openSwitch" /><el-buttontype="primary"size="default"class="onlineGallery-button-drawerOpen"@click="openSwitch"><template #icon><el-icon><ArrowRightBold /></el-icon></template></el-button></div><div class="onlineGallery-child-window-container"></div></template><script setup>import {useAppInfoStore} from "./store/mainStore.js"; import Body from "./components/Body.vue";import {ArrowRightBold, Close} from "@element-plus/icons-vue"; const info = useAppInfoStore();const container = ref(null); const body = ref(null); const openSwitch = async () => {info.switchOpen();if (info.open) {document.documentElement.dataset.showScrollbar = false.toString(); if (body.value.data.cardList.length < 1) {setTimeout(() => body.value.getCards(), 1000);}container.value.focus();} else {document.documentElement.dataset.showScrollbar = true.toString(); }};const focus = () => {};const blur = () => {};onMounted(() => {ElNotification({title: "提示",message: h("i", {style: "color: teal"}, "onlineGallery 已加载"),duration: 3000,});if (info.open) {document.documentElement.dataset.showScrollbar = false; container.value.focus();} else {document.documentElement.dataset.showScrollbar = true; }});</script><style scoped lang="scss">* {box-sizing: border-box;border: 0;pointer-events: auto;}.onlineGallery-container {box-sizing: border-box;position: fixed;z-index: 2147483646;padding: 0 30px 20px 30px;margin: 0;left: calc(0px - var(--width));top: 0 !important;bottom: 0;width: var(--width);max-width: 100vw !important;background-color: rgba(255, 255, 255, 0.8);box-shadow: var(--el-box-shadow-dark);backdrop-filter: blur(2px);display: flex;flex-flow: column;justify-content: start;align-items: center;transition: 0.5s ease;&[data-open="true"] {left: 0px !important;}&:focus {outline: none;}@media (max-width: 500px) {padding: 4px;}}.onlineGallery-button-drawerOpen {position: absolute;z-index: 1;margin: auto 0;$size: 30px;width: $size - 0px;height: $size * 2;border-radius: 0 $size $size 0;right: 0;top: 0;bottom: 0;cursor: pointer;display: flex;justify-content: center;align-items: center;font-size: xx-large;:root:has(.onlineGallery-container[data-open="false"]) & {border-radius: 0 $size $size 0 !important;box-shadow: var(--el-box-shadow-light);right: -$size;transition: 0.25s 0.25s ease;}:root:has(.onlineGallery-container[data-open="true"]) & {border-radius: $size 0 0 $size !important;background-color: transparent;box-shadow: none;transition: 0.25s 0.25s ease;}& i {transition: 0.25s 0.25s ease;:root:has(.onlineGallery-container[data-open="false"]) & {transform: rotateY(0deg);color: auto;}:root:has(.onlineGallery-container[data-open="true"]) & {transform: rotateY(180deg);color: #409eff;}}@media (max-width: 500px) {& {right: -$size !important;i {transform: rotateY(0deg) !important;}}}}.onlineGallery-button-close {position: absolute;right: 10px;top: 10px;width: fit-content;height: fit-content;box-shadow: var(--el-box-shadow-light);}.onlineGallery-child-window-container {position: fixed;z-index: 2147483646;overflow: visible;}</style>./store/mainStore.js